import os
import os.path

LIBPATH     = "../libs"
LIBNAME     = "lgutil"
CLANG_CC    = "/home/laoguo/toolchains/clang/build/bin/clang"
GCC_CC      = "/home/laoguo/toolchains/arm-2014.05/bin/arm-none-linux-gnueabi-gcc"

CPPPATH     = [".", "../libs", "/home/laoguo/toolchains/arm-2014.05/arm-none-linux-gnueabi/libc/usr/include"]
CCFLAGS     = ["-O0", "-g", "-target",  "armv5-none-eabi", "-mcpu=arm968e-s"]
CPPDEFINES  = ["DEBUG"]
LIBPATH     = [LIBPATH]
LIBS        = [LIBNAME]
LINKFLAGS   = []


clang_env = Environment(
    CC = CLANG_CC,
    CPPPATH = CPPPATH,
    CCFLAGS = CCFLAGS,
    CPPDEFINES = CPPDEFINES,
    LIBPATH = LIBPATH,
    LIBS = LIBS,
    LINKFLAGS = LINKFLAGS,
    )

gcc_env = clang_env.Clone(CC = GCC_CC)

dir_name = os.path.abspath(".")
print dir_name
base_name = os.path.basename(dir_name)

objs = clang_env.Object(source = Glob("./*.c"))

gcc_env.Program(target = base_name, source = objs)

